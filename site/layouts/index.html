{{ define "title" }}{{ .Site.Title }}{{ end }}
{{ define "main" }}
  {{ $pages := where .Site.RegularPages "Section" "recipes" }}
  {{ $sorted := sort $pages "Date" "desc" }}
  {{ $paginator := .Paginate $sorted 5 }}
  <section class="recipes-list">
    {{ range $paginator.Pages }}
      <article class="recipe-card">
        <a href="{{ .RelPermalink }}">
          {{ with .Params.image }}
            <div class="recipe-cover">
              <img src="{{ . | absURL }}" alt="{{ $.Title }}">
            </div>
          {{ end }}
          <div class="recipe-title">{{ .Title }}</div>
        </a>
      </article>
    {{ else }}
      <p class="meta muted">Рецептов пока нет.</p>
    {{ end }}
  </section>
  {{ if gt $paginator.TotalPages 1 }}
    <nav class="pagination meta-line" aria-label="Навигация по страницам">
      {{ if $paginator.HasPrev }}
        <a class="chip" href="{{ $paginator.Prev.URL }}">← Назад</a>
      {{ end }}
      <span class="chip">Стр. {{ $paginator.PageNumber }} / {{ $paginator.TotalPages }}</span>
      {{ if $paginator.HasNext }}
        <a class="chip" href="{{ $paginator.Next.URL }}">Вперед →</a>
      {{ end }}
    </nav>
  {{ end }}
{{ end }}
